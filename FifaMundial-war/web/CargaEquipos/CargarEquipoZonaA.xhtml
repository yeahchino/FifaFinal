<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../TemplateBase.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <h:form prependId="false">
            <p:fieldset id="equiposDisponiblesField" legend="Equipos Disponibles para la Zona A">
                <p:dataTable id="equiposDisponibles" var="equi" value="#{equipoJSFManagedBean.equiposSource}">
                    <p:column style="width:20px">
                        <h:outputText id="dragIcon" styleClass="ui-icon ui-icon-arrow-4" />
                        <p:draggable for="dragIcon" revert="true" helper="clone"/>
                    </p:column>

                    <p:column headerText="Paises">
                        <h:outputText value="#{equi.paisidPais.nombre}" />
                    </p:column>
                </p:dataTable>
            </p:fieldset>

            <p:fieldset id="equiposTargetField" legend="Equipos Seleccionados para la Zona A" style="margin-top:20px">
                <p:outputPanel id="dropArea">
                    <h:outputText value="Arrastre su equipo Aqui" rendered="#{empty equipoJSFManagedBean.equiposTargetA}" style="font-size:24px;" />
                    <p:dataTable id="equiposTarget" var="equipo" value="#{equipoJSFManagedBean.equiposTargetA}" rendered="#{not empty equipoJSFManagedBean.equiposTargetA}">
                        <p:column headerText="Equipos">
                            <h:outputText value="#{equipo.paisidPais.nombre}" />
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
            </p:fieldset>

            <p:droppable for="equiposTargetField" 
                         tolerance="touch" 
                         activeStyleClass="ui-state-highlight" 
                         datasource="equiposDisponibles" 
                         onDrop="handleDrop">
                <p:ajax listener="#{equipoJSFManagedBean.onEquipoDrop}" 
                        update="dropArea equiposDisponibles" />
            </p:droppable>

            <script type="text/javascript">
                function handleDrop(event, ui) {
                    var droppedCar = ui.draggable;

                    droppedCar.fadeOut('fast');
                }
            </script>

        </h:form>
    </ui:define>

</ui:composition>
